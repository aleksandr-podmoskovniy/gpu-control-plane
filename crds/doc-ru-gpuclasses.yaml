spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: >
            Кластерный ресурс, задающий контракт и политику выдачи GPU
            (в перспективе конвертируется контроллером в DRA DeviceClass).
          properties:
            spec:
              description: Желаемая политика для логического класса GPU.
              properties:
                vendor:
                  description: Вендор GPU (Nvidia/Amd/Intel).
                  enum:
                    - Nvidia
                    - Amd
                    - Intel
                deviceType:
                  description: Тип устройства (Physical/MIG).
                  enum:
                    - Physical
                    - MIG
                nvidia:
                  description: NVIDIA-специфичные настройки класса.
                  properties:
                    mig:
                      description: Настройки MIG (обязательны, если deviceType=MIG).
                      properties:
                        profile:
                          description: Имя MIG-профиля (например, 2g.12gb).
                sharing:
                  description: Политика совместного использования GPU.
                  properties:
                    strategy:
                      description: Стратегия совместного использования (Exclusive, TimeSlicing, MPS).
                      enum:
                        - Exclusive
                        - TimeSlicing
                        - MPS
                    timeSlicing:
                      description: Настройки для TimeSlicing.
                      properties:
                        interval:
                          description: Интервал нарезки (Default/Short/Medium/Long).
                          enum:
                            - Default
                            - Short
                            - Medium
                            - Long
                    mps:
                      description: Настройки для NVIDIA MPS.
                      properties:
                        defaultActiveThreadPercentage:
                          description: Процент активных потоков по умолчанию (1..100).
                selector:
                  description: LabelSelector для отбора PhysicalGPU по меткам.
                names:
                  description: Явный allowlist PhysicalGPU по именам.
                requirements:
                  description: Дополнительные ограничения (память, compute capability).
                  properties:
                    minMemory:
                      description: Минимальный объём VRAM (например, 16Gi).
                    minComputeCapability:
                      description: Минимальная Compute Capability (например, 8.6).
            status:
              description: Статус валидации и диагностические данные.
              properties:
                valid:
                  description: Валидна ли спецификация GPUClass.
                message:
                  description: Диагностическое сообщение при ошибке валидации.
                generated:
                  description: Сгенерированные идентификаторы (для диагностики).
                  properties:
                    deviceClassName:
                      description: Имя созданного DRA DeviceClass.
                    extendedResourceName:
                      description: Имя extended resource (Kubernetes >= 1.34).
