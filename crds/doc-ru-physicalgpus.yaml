spec:
  versions:
    - name: v1alpha1
      schema:
        openAPIV3Schema:
          description: >
            Кластерный ресурс, описывающий физический GPU в инвентаре:
            PCI-идентификацию, условия готовности и возможности устройства.
          properties:
            spec:
              description: Желаемое состояние (в v0 не используется, spec пустой).
            status:
              description: Набор наблюдаемых характеристик и условий готовности.
              properties:
                nodeInfo:
                  description: Сведения о ноде, ОС и ядре.
                  properties:
                    nodeName:
                      description: Имя узла Kubernetes, где обнаружена карта.
                    os:
                      description: Идентификаторы ОС (из /etc/os-release).
                      properties:
                        id:
                          description: Идентификатор ОС (например, ubuntu).
                        version:
                          description: Версия ОС (например, 22.04).
                        name:
                          description: Человекочитаемое имя ОС.
                    kernelRelease:
                      description: Релиз ядра (uname -r).
                    bareMetal:
                      description: Признак bare-metal (true/false).
                pciInfo:
                  description: PCI-идентификация устройства.
                  properties:
                    address:
                      description: Полный PCI-адрес (domain:bus:slot.func).
                    class:
                      description: PCI class (base+subclass).
                      properties:
                        code:
                          description: Код класса (например, 0302).
                        name:
                          description: Имя класса (например, 3D controller).
                    vendor:
                      description: PCI vendor.
                      properties:
                        id:
                          description: PCI vendor ID (например, 10de).
                        name:
                          description: Имя vendor (например, NVIDIA Corporation).
                    device:
                      description: PCI device.
                      properties:
                        id:
                          description: PCI device ID (например, 20b7).
                        name:
                          description: Имя устройства (например, GA100GL [A30 PCIe]).
                capabilities:
                  description: Capability snapshot устройства (доступно при DriverReady=True).
                  properties:
                    productName:
                      description: Название продукта (например, NVIDIA A30).
                    memoryMiB:
                      description: Общий объём VRAM в MiB.
                    vendor:
                      description: Вендор устройства (Nvidia/Amd/Intel).
                      enum:
                        - Nvidia
                        - Amd
                        - Intel
                    nvidia:
                      description: NVIDIA-специфичные возможности (только если vendor=Nvidia).
                      properties:
                        computeCap:
                          description: Compute Capability (например, 8.0).
                        productArchitecture:
                          description: Архитектура (например, Ampere).
                        boardPartNumber:
                          description: Board Part Number.
                        computeTypes:
                          description: Список поддерживаемых compute типов.
                        powerLimitMinW:
                          description: Минимальный поддерживаемый power limit в ваттах.
                        powerLimitMaxW:
                          description: Максимальный поддерживаемый power limit в ваттах.
                        migSupported:
                          description: Поддержка MIG (true/false).
                        mig:
                          description: Профили MIG (только если migSupported=true).
                          properties:
                            totalSlices:
                              description: Общее число MIG-слайсов на карте.
                            profiles:
                              description: Полный список поддерживаемых профилей MIG.
                              items:
                                properties:
                                  profileID:
                                    description: Числовой ID профиля.
                                  name:
                                    description: Имя профиля (например, 2g.12gb).
                                  memoryMiB:
                                    description: Объём памяти профиля в MiB.
                                  sliceCount:
                                    description: Сколько слайсов занимает профиль.
                                  maxInstances:
                                    description: Максимум инстансов профиля.
                                  multiprocessors:
                                    description: Количество SM в профиле.
                                  copyEngines:
                                    description: Количество copy engines в профиле.
                                  decoders:
                                    description: Количество decoder engines в профиле.
                                  encoders:
                                    description: Количество encoder engines в профиле.
                                  jpegEngines:
                                    description: Количество JPEG engines в профиле.
                                  ofaEngines:
                                    description: Количество OFA engines в профиле.
                conditions:
                  description: Список условий готовности (DriverReady, HardwareHealthy).
                currentState:
                  description: Текущее состояние драйвера/режимов (только при DriverReady=True).
                  properties:
                    driverType:
                      description: Текущий тип драйвера (Nvidia/VFIO/ROCm).
                      enum:
                        - Nvidia
                        - VFIO
                        - ROCm
                    nvidia:
                      description: NVIDIA-специфичное текущее состояние.
                      properties:
                        gpuUUID:
                          description: UUID GPU (как в nvidia-smi).
                        driverVersion:
                          description: Версия драйвера NVIDIA.
                        cudaVersion:
                          description: Версия CUDA.
                        powerLimitCurrentW:
                          description: Текущий power limit в ваттах.
                        powerLimitEnforcedW:
                          description: Принудительный (enforced) power limit в ваттах.
                        mig:
                          description: Текущий режим MIG (если поддерживается).
                          properties:
                            mode:
                              description: Enabled/Disabled/NotAvailable/Unknown.
